# Устранение неполадок DICOM Viewer

## Проблема: Приложение зависает при загрузке DICOM файла

### Возможные причины:

1. **Backend сервер не запущен**
   - Убедитесь, что Python backend запущен на http://127.0.0.1:8000
   - Запустите: `python flutter_application_1/lib/backend/main.py`

2. **Файл без расширения .dicom**
   - Приложение поддерживает файлы без расширения
   - Backend использует `force=True` для чтения DICOM файлов

3. **Большой размер файла**
   - Максимальный размер файла: 100 MB
   - Большие файлы могут обрабатываться дольше

4. **Проблемы с сетью**
   - Проверьте, что порт 8000 не заблокирован
   - Убедитесь, что нет конфликтов с другими приложениями

### Решения:

1. **Запустите backend сервер:**
   ```bash
   cd flutter_application_1/lib/backend
   python main.py
   ```

2. **Проверьте доступность сервера:**
   - Откройте http://127.0.0.1:8000 в браузере
   - Должен появиться JSON ответ: `{"status": "ok", "message": "DICOM Viewer Backend is running"}`

3. **Проверьте логи:**
   - Backend выводит подробные логи в консоль
   - Flutter приложение выводит логи в консоль разработчика

4. **Попробуйте с другим файлом:**
   - Используйте файл меньшего размера
   - Убедитесь, что файл является валидным DICOM

### Улучшения в коде:

1. **Добавлены таймауты** - запросы не будут висеть бесконечно
2. **Проверка размера файла** - файлы больше 100MB отклоняются
3. **Декодирование в изоляте** - предотвращает блокировку UI
4. **Улучшенная обработка ошибок** - более информативные сообщения
5. **Health check** - проверка доступности сервера перед запросом

### Логи для отладки:

Backend логи:
- "Получен файл: ..."
- "DICOM файл успешно прочитан..."
- "Ответ подготовлен. Размер base64: ..."

Flutter логи:
- "Выбран файл: ..."
- "Сервер доступен, статус: ..."
- "Изображение декодировано, размер: ..."


