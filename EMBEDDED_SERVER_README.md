# DICOM Viewer с встроенным сервером

## Что изменилось

Теперь приложение содержит встроенный Python сервер, который автоматически запускается при старте приложения. Пользователю больше не нужно вручную запускать бэкенд!

## Как это работает

1. **При первом запуске** приложение:
   - Создает папку `server` в Documents
   - Генерирует Python скрипт `main.py` с DICOM обработкой
   - Создает `requirements.txt` с зависимостями
   - Автоматически устанавливает Python пакеты через pip
   - Запускает сервер на `http://127.0.0.1:8000`

2. **При последующих запусках**:
   - Просто запускает уже созданный сервер
   - Никаких дополнительных установок не требуется

## Требования для пользователя

- **Python 3.8+** должен быть установлен в системе
- Python должен быть доступен из командной строки (в PATH)
- Интернет для первоначальной установки зависимостей

## Сборка для распространения

### Автоматическая сборка
```bash
# Запустите bat-файл
build_with_embedded_server.bat
```

### Ручная сборка
```bash
# 1. Установите зависимости
flutter pub get

# 2. Соберите приложение
flutter build windows --release

# 3. Скопируйте файлы из build/windows/x64/runner/Release/
```

## Структура файлов

```
flutter_application_1/
├── lib/
│   └── services/
│       └── embedded_server_service.dart  # Управление встроенным сервером
├── build_with_embedded_server.bat       # Скрипт сборки
└── EMBEDDED_SERVER_README.md            # Эта инструкция
```

## Что создается при первом запуске

```
Documents/
└── server/
    ├── main.py              # Python сервер
    └── requirements.txt     # Зависимости
```

## Преимущества

✅ **Один exe-файл** - пользователь просто запускает приложение  
✅ **Автоматическая установка** - зависимости устанавливаются сами  
✅ **Портативность** - можно копировать на другие компьютеры  
✅ **Простота** - никаких дополнительных настроек  

## Размер приложения

- **Без встроенного сервера**: ~50MB
- **С встроенным сервером**: ~150-200MB (включая Python зависимости)

## Отладка

Если сервер не запускается, проверьте:
1. Установлен ли Python: `python --version`
2. Доступен ли pip: `pip --version`
3. Есть ли интернет для установки зависимостей
4. Логи в консоли приложения

## Возможные проблемы

**"Python не найден"**
- Установите Python 3.8+ с официального сайта
- Убедитесь, что Python добавлен в PATH

**"Ошибка установки зависимостей"**
- Проверьте интернет-соединение
- Попробуйте запустить: `pip install --upgrade pip`

**"Сервер не отвечает"**
- Перезапустите приложение
- Проверьте, не занят ли порт 8000 другим процессом
